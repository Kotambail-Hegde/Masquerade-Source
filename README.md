# So, what's masquerade ?

A multi-system emulator supporting classic gaming consoles and simulators.

[![Web Version](https://img.shields.io/badge/web-online-blue?style=flat-square)](https://kotambail-hegde.github.io/Masquerade-Emulator/hosting/)
[![Releases](https://img.shields.io/badge/download-releases-green?style=flat-square)](https://github.com/Kotambail-Hegde/Masquerade-Emulator/releases)
[![Linux](https://img.shields.io/github/actions/workflow/status/Kotambail-Hegde/Masquerade-Source/build.yml?branch=master&label=Linux)](https://github.com/Kotambail-Hegde/Masquerade-Source/actions/workflows/build.yml)
[![Windows](https://img.shields.io/github/actions/workflow/status/Kotambail-Hegde/Masquerade-Source/build.yml?branch=master&label=Windows)](https://github.com/Kotambail-Hegde/Masquerade-Source/actions/workflows/build.yml)
[![Emscripten](https://img.shields.io/github/actions/workflow/status/Kotambail-Hegde/Masquerade-Source/build.yml?branch=master&label=Emscripten)](https://github.com/Kotambail-Hegde/Masquerade-Source/actions/workflows/build.yml)

---

## Supported Systems

- **Game Boy Advance (GBA)**
- **Game Boy Color (GBC)**
- **Game Boy (GB)**
- **Nintendo Entertainment System (NES)**
- **Ms Pac-Man**
- **Pac-Man** (Midway and Namco variants)
- **Space Invaders**
- **CHIP-8**
- **S-CHIP**
- **XO-CHIP**
- **Game of Life**

---

## Getting Started

### Quick Access

- **[Try Web Version](https://kotambail-hegde.github.io/Masquerade-Emulator/hosting/)** - Play directly in your browser
- **[Download Desktop Build](https://github.com/Kotambail-Hegde/Masquerade-Emulator/releases)** - Available for Windows

---

## Gameplay Gallery

### P0052: ImGui + SDL3 + OpenGL3 (Recommended)

#### User Interface

<kbd><img width="240" height="160" alt="UI Screenshot 1" src="https://github.com/user-attachments/assets/f7af5623-f801-4d18-bcda-f18f7470454f" /></kbd> <kbd><img width="240" height="160" alt="UI Screenshot 2" src="https://github.com/user-attachments/assets/115f97b2-5858-4e2c-80b9-f6ba3049aa4a" /></kbd>

#### Pokémon Crystal, Pokémon Emerald and Pokémon Blue

<kbd><img width="200" alt="Pokemon Crystal" src="https://github.com/user-attachments/assets/3011b49f-45c6-4f18-bbc5-6ede797e81ad" /></kbd> <kbd><img width="200" alt="Pokemon Emerald" src="https://github.com/user-attachments/assets/d668bc27-9589-4897-bc92-8e1ca14c5d7b" /></kbd> <kbd><img width="200" alt="Pokemon Blue" src="https://github.com/user-attachments/assets/3fa02907-9902-4b73-a75a-af8e74df8ef6" /></kbd>

### P0010: OLC (Deprecated)

#### User Interface

<kbd><img width="240" height="160" alt="OLC UI" src="https://github.com/user-attachments/assets/331178df-2d66-4fba-8d10-dc5c186acb86" /></kbd>

#### Pokémon Ruby, Emerald, and Sapphire

<kbd><img width="200" alt="Pokemon Ruby" src="https://github.com/user-attachments/assets/4d50ea26-2368-46ea-8753-53c470a056d4" /></kbd> <kbd><img width="200" alt="Pokemon Emerald" src="https://github.com/user-attachments/assets/511e90e0-aa1b-491c-9937-40c9d1e57ee6" /></kbd> <kbd><img width="200" alt="Pokemon Sapphire" src="https://github.com/user-attachments/assets/8b5a58cb-d602-4b47-9fc9-833e36f6737a" /></kbd>

#### Game Boy Advance - Pokémon Fire Red and Leaf Green

<kbd><img width="200" alt="Pokemon Fire Red" src="https://github.com/user-attachments/assets/c1d64f3a-ff2e-4b36-9adf-612df56e178e" /></kbd> <kbd><img width="200" alt="Pokemon Leaf Green" src="https://github.com/user-attachments/assets/471c901a-b278-406b-8b99-41bdb4787188" /></kbd>

#### Game Boy Color - Donkey Kong Country and Pokémon Crystal

<kbd><img width="200" alt="Donkey Kong Country" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/3d6bfb58-ae88-4b66-b299-ef20faf67112" /></kbd> <kbd><img width="200" alt="Pokemon Crystal" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/3b318907-dc70-4488-8552-729b98504603" /></kbd>

#### Game Boy - Multiple Palette Examples

*Prehistorik Man in BGB Palette, Pinball Deluxe in Gearboy Palette and Altered Space in Sameboy Palette*

<kbd><img width="200" alt="Prehistorik Man" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/8819c689-b3ad-444e-bece-d43a993e05b7" /></kbd> <kbd><img width="200" alt="Pinball Deluxe" src="https://github.com/user-attachments/assets/85f488ce-09e3-4624-b98f-73de539d051c" /></kbd> <kbd><img width="200" alt="Altered Space" src="https://github.com/user-attachments/assets/b6c38587-8d40-4f41-ab1a-e921194ebf53" /></kbd>

#### Nintendo Entertainment System - Super Mario Bros 3 and Zelda II

<kbd><img width="200" alt="Super Mario Bros 3" src="https://github.com/user-attachments/assets/ddd2fc8c-bd61-4ed2-b8f3-0bacdcd08987" /></kbd> <kbd><img width="200" alt="Zelda II" src="https://github.com/user-attachments/assets/fd9da1bc-8ecb-4922-95fb-512b984cfabd" /></kbd>

#### Nintendo Entertainment System - Super Mario Bros and Kong Classic

<kbd><img width="200" alt="Super Mario Bros" src="https://github.com/user-attachments/assets/0d7448a5-e353-46e1-8635-6d37cce576d8" /></kbd> <kbd><img width="200" alt="Kong Classic" src="https://github.com/user-attachments/assets/42b79a0a-b867-4734-88de-dd9efe273193" /></kbd>

#### Pac-Man

<kbd><img width="200" alt="Pac-Man" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/81b421c4-bb53-4985-ae15-90d8dd572b5a" /></kbd>

#### Ms Pac-Man

<kbd><img width="200" alt="Ms Pac-Man" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/b55f29d8-fcfb-4d5b-b30c-fb9b8afe0e35" /></kbd>

#### Space Invaders

<kbd><img width="200" alt="Space Invaders" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/afac2f45-75e0-4a24-b087-1499360cf703" /></kbd>

#### CHIP-8 - Pong

<kbd><img width="200" alt="CHIP-8 Pong" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/f162afa0-733e-4d4f-8fdf-7a907cb878e2" /></kbd>

#### Game of Life - Toroidal Mode

<kbd><img width="350" alt="Game of Life" src="https://github.com/Kotambail-Hegde/Masquerade-Emulator/assets/29670073/44bd5adf-bbe5-4edc-a47a-eff03cc8faae" /></kbd>

---

## Detailed System Information

### Game Boy Advance (GBA)

#### Features
- Supports GBA BIOS
- Supports all 5 PPU modes
- Supports all APU channels

#### Test Results
- Passes jsmolka/alyosha-tas's arm.gba, thumb.gba, memory.gba, flash and PPU tests
- Passes FuzzARM.gba
- Passes all tests within the AGS suite except:
  - PREFETCH BUFFER
  - WAIT STATE WAIT CONTROL
  - CARTRIDGE RAM WAIT CONTROL
  - TIMER PRESCALER 0
- Passes all mgba-suite tests except following tests:
  - Timing Tests
  - Timer Count-Up Tests
  - Timer IRQ Tests
  - DMA Tests
  - SIO Tests
  - MISC Edge Case Tests
- Passes all tests in tonc's test suite
- Passes all belogic's audio tests

#### Known Issues
- Unable to play few video ROMs like Dragon Ball GT
- Minor visual artifacts top left corner in Mode 3 for some video ROMs like Pokemon
- Some undesired audio artifacts (expected fix in **_P0152_** variant)
- Low end devices still need PGOs to run at full speed (expected fix in **_P0152_** variant)

---

### Game Boy / Game Boy Color (GB / GBC)

#### Features
- Supports GB and GBC BIOS
- Implements Pixel-Fetcher/Pixel-FIFO
- GBC supports GB mode
- Supports multiple palettes on GB
- Supports GameGenie and GameShark cheats
- Supports BESS specification for save/load states
- Supports GBVideoPlayer2 video ROMs with audio
- GBC supports color correction closely matching real hardware
- Supports following Memory Bank Controllers:
  - NO MBC
  - MBC1
  - MBC2
  - MBC3
  - MBC5
  - MBC30

#### Test Results
- Completely passes Tom Harte's SingleStepTests (official and unofficial opcodes) for SM83
- Passes all Blargg test suite except:
  - oam_bug.gb
- Passes Moon Eye tests except:
  - boot_div-dmgABCmgb.gb
  - boot_hwio-dmgABCmgb.gb
- Passes Wilbert Pol's tests except:
  - GB only:
    - ly_lyc_153_write-GS.gb
  - GBC only:
    - ly_lyc_0_write-C.gb
    - ly_lyc_153_write-C.gb
    - ly_lyc_write-C.gb
- Passes Daid's GBEmulatorShootout tests except:
  - ppu_scanline_bgp.gb
- Passes PeachyHardwareAbuse tests including ctf.gb
- Passes MMIO_exec_1.gb
- Passes DMG Aging Cartridge test
- Passes ax6's rtc3test suite
- APU plays ISSOtm's smooth-player.gb
- Passes all Hacktix's tests except:
  - strikethrough.gb
- Passes TurtleTests
- Passes MagenTests (GBC)
- Passes mbc3-tester
- Fails some same-suite tests:
  - apu
- Fails many age-test-roms tests:
  - m3-bg-lcdc (few differences)
  - m3-bg-scx (few differences)
  - oam
  - speed-switch
  - stat-mode (few differences)
  - stat-mode-sprites
  - stat-mode-window
  - vram

#### Known Issues
- Fails cgb-acid-hell
- Fails windesync-validate.gb
- Fails many docboy-test-suite's APU and CGB tests
- Fails some of the Mealybug Tearoom tests by a very slight margin (a single pixel offset is seen from the expected!)
- Link Cable not supported
- Multiple CGB-specific quirks remain unimplemented

---

### Nintendo Entertainment System (NES)

#### Features
- 6502 CPU passes Klaus Dormann's 6502_65C02_functional_tests including BCD tests
- Supports mappers:
  - NROM
  - MMC1 (including SEROM, SHROM, SH1ROM, SuROM variants)
  - UxROM (002)
  - CNROM
  - MMC3
  - AxROM
  - GxROM
  - Nanjian FC-001 (Mapper 163)
- Supports GameGenie cheats
- Supports Zapper in Port 2 (mouse clicks)

#### Test Results
- Passes Nestest (official and unofficial opcodes)
- Completely passes Tom Harte's SingleStepTests for NES6502
- Passes Blargg CPU tests (official and unofficial opcodes)
- Passes Blargg CPU timing tests
- Passes Blargg CPU dummy read/write tests
- Passes NES Dev Wiki CPU tests
- Passes blargg_ppu_tests_2005.09.15b
- Passes blargg_apu_2005.07.30
- Passes Blargg sprite_overflow_test suite
- Passes Blargg sprite_hit_tests_2005.10.05
- Passes all APU tests including DMC
- Passes Blargg vbl_nmi_timing and ppu_vbl_nmi tests
- Passes Blargg cpu_interrupt_v2 tests
- Passes OAM stress tests
- Passes Blargg and Bisqwit's ppu_open_bus tests
- Passes Bisqwit's cpu_exec_space tests
- Passes Blargg mmc3_irq_tests suite except:
  - 4-scanline_timing.nes

#### Known Issues
- Unable to boot Dragon Warrior III
- DMC DMA timing quirks need proper emulation

---

### Pac-Man and Ms Pac-Man

#### Features
- Z80 CPU emulation
- Passes Tom Harte's SingleStepTests for Z80 (official and unofficial opcodes)
- Passes zexdoc and zexall tests
- Supports both Midway and Namco variants

#### Supported Pac-Man Boot-legs
- Hangly Man
- Uniprom Variant
- Baracuda
- NewPuc
- After Dark
- Snatcher Set 1 and 2

#### Planned Support (Pac-Man Boot-legs)
- Streaking
- Titan
- Caterpillar
- Abscam
- Joyman
- Piranha
- Galaxian Hardware Variant

#### Supported Ms Pac-Man Boot-legs (planned/partial)
- MsPacPlus
- After Dark
- MsPacAttackNew
- MsPacAtackOld

---

### Space Invaders

#### Features
- Supports color overlays

---

### CHIP-8 / S-CHIP / XO-CHIP

#### Supported Variants
- CHIP-8
- S-Chip Legacy
- S-Chip Modern
- XO-Chip (supporting audio and up to 4 planes)

#### Features
- Completely passes Timendus's chip8-test-suite v4.2
- Completely passes CubeChip test suite
- Supports ROM database auto-detection of:
  - Variants
  - Quirks
  - Recommended palettes
  - Recommended keybindings
  - Recommended execution rate

---

### Game of Life

#### Supported Modes
- Normal Mode
- Toroidal Mode
- Pan/Zoom support planned

---

### Additional CPU Test Coverage

- Passes extensive test ROM suites for:
  - 8080 (official and unofficial opcodes)
  - Z80 (official and unofficial opcodes)
  - SM83 (official and unofficial opcodes)
  - 6502 (official and unofficial opcodes)
- Supports Save States and Load States
- Supports OTA updates
- Supports dynamic drag and drop of ROMs including multipart ROMs for Space Invaders and Pacman/MsPacman

---

## Variants

Masquerade is available in two variants, differing in their underlying libraries:

### P0052: ImGui + SDL3 + OpenGL3 (Recommended)

Modern UI framework with enhanced features and performance.

**Technology Stack:**
- ImGui for interface
- SDL3 for windowing and input
- OpenGL3 for rendering
- nativefiledialog-extended for file dialogs
- Boost libraries for INI parsing

### P0010: OLC (Deprecated)

Legacy variant based on One Lone Coder's Pixel Game Engine.

**Note:** P0010 is no longer supported. Users should migrate to P0052 for latest features and updates.

**Technology Stack (Legacy):**
- Forked version of One Lone Coder's Pixel Game Engine
- One Lone Coder's Sound Wave Engine
- Boost libraries for INI parsing

---

## Automated Test Reports
- Game Boy / Game Boy Color (GB/GBC) : [GB Emulator Shootout](https://kotambail-hegde.github.io/Masquerade-Emulator/tests/gb/GBEmulatorShootout/)

---

## Credits and Acknowledgments

### Documentation and References

#### Game Boy / Game Boy Color
- [GB Pandocs](https://gbdev.io/pandocs/) - Comprehensive Game Boy documentation
- [GB Dev Wiki](https://gbdev.gg8.se/wiki/articles/Memory_Bank_Controllers) - Memory Bank Controller documentation
- [Codeslinger's Blog](http://www.codeslinger.co.uk/pages/projects/gameboy.html) - Game Boy emulation guide
- [Night Shade's Audio Implementation](https://nightshade256.github.io/2021/03/27/gb-sound-emulation.html) - Audio emulation guide
- [The Ultimate Gameboy Talk](https://github.com/drhelius/Gearboy) - Technical reference
- [Antonio's Technical Documentation](https://github.com/AntonioND/giibiiadvance/blob/master/docs/TCAGBD.pdf) - Game Boy Advance technical guide

#### Game Boy Advance
- [GBATEK](http://problemkaputt.de/gbatek-gba-reference.htm) - Comprehensive GBA reference
- [TONC](https://gbadev.net/tonc/) - GBA programming tutorials
- [NBA HW Docs](https://nba-emu.github.io/hw-docs/) - Hardware documentation
- [GBA Docs](https://gbadev.net/gbadoc/) - GBA development documentation
- [Dillonb's Cartridge Guide](https://dillonbeliveau.com/2020/06/05/GBA-FLASH.html) - Flash cartridge implementation
- [GBA PPU Access Pattern](https://nba-emu.github.io/hw-docs/ppu/ppu.html) - PPU timing documentation

#### Nintendo Entertainment System
- [NES Dev Wiki](https://www.nesdev.org/wiki/Nesdev_Wiki) - Comprehensive NES documentation

### Reference Emulators

- [Gearboy](https://github.com/drhelius/Gearboy) - GB/GBC reference and testing
- [gbmulator](https://github.com/mpostaire/gbmulator) - GB/GBC testing
- [NBA](https://github.com/nba-emu/NanoBoyAdvance) - GBA reference and testing
- [SkyEmu](https://github.com/skylersaleh/SkyEmu) - GBA testing and UI theme inspiration
- [Dillonb's GBA Emulator](https://github.com/Dillonb/gba/) - CLI logger/debugger inspiration

### Test Suites and Test ROMs

- Blargg test ROMs for GB, GBC, and NES
- jsmolka and alyosha-tas test ROMs for GBA
- [AGS Test Suite](https://github.com/DenSinH/AGSTests/tree/main) by DenSinH - GBA test ROMs
- Tom Harte's SingleStepTests for 6502 and SM83 CPU testing

### Community

- [Emulator Development Discord](https://discord.com/invite/emudev) - Active community support and development discussions

---

## License

See the repository for license information.

---

**[Web Version](https://kotambail-hegde.github.io/Masquerade-Emulator/hosting/)** | **[Downloads](https://github.com/Kotambail-Hegde/Masquerade-Emulator/releases)** | **[Report Issues](https://github.com/Kotambail-Hegde/Masquerade-Emulator/issues)**
